{"version":3,"file":"classAdderBuilder-b17e8436.js","sources":["../../../../../../../../node_modules/@smui/common/dist/internal/classMap.js","../../../../../../../../node_modules/@smui/common/dist/internal/forwardEventsBuilder.js","../../../../../../../../node_modules/@smui/common/dist/internal/useActions.js","../../../../../../../../node_modules/@smui/common/dist/SmuiElement.svelte","../../../../../../../../node_modules/@smui/common/dist/classadder/ClassAdder.svelte","../../../../../../../../node_modules/@smui/common/dist/classadder/classAdderBuilder.js"],"sourcesContent":["export function classMap(classObj) {\n    return Object.entries(classObj)\n        .filter(([name, value]) => name !== '' && value)\n        .map(([name]) => name)\n        .join(' ');\n}\n//# sourceMappingURL=classMap.js.map","import { bubble, listen, prevent_default, stop_propagation, } from 'svelte/internal';\n// Match old modifiers. (only works on DOM events)\nconst oldModifierRegex = /^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;\n// Match new modifiers.\nconst newModifierRegex = /^[^$]+(?:\\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;\nexport function forwardEventsBuilder(component) {\n    // This is our pseudo $on function. It is defined on component mount.\n    let $on;\n    // This is a list of events bound before mount.\n    let events = [];\n    // And we override the $on function to forward all bound events.\n    component.$on = (fullEventType, callback) => {\n        let eventType = fullEventType;\n        let destructor = () => { };\n        if ($on) {\n            // The event was bound programmatically.\n            destructor = $on(eventType, callback);\n        }\n        else {\n            // The event was bound before mount by Svelte.\n            events.push([eventType, callback]);\n        }\n        const oldModifierMatch = eventType.match(oldModifierRegex);\n        if (oldModifierMatch && console) {\n            console.warn('Event modifiers in SMUI now use \"$\" instead of \":\", so that ' +\n                'all events can be bound with modifiers. Please update your ' +\n                'event binding: ', eventType);\n        }\n        return () => {\n            destructor();\n        };\n    };\n    function forward(e) {\n        // Internally bubble the event up from Svelte components.\n        bubble(component, e);\n    }\n    return (node) => {\n        const destructors = [];\n        const forwardDestructors = {};\n        // This function is responsible for listening and forwarding\n        // all bound events.\n        $on = (fullEventType, callback) => {\n            let eventType = fullEventType;\n            let handler = callback;\n            // DOM addEventListener options argument.\n            let options = false;\n            const oldModifierMatch = eventType.match(oldModifierRegex);\n            const newModifierMatch = eventType.match(newModifierRegex);\n            const modifierMatch = oldModifierMatch || newModifierMatch;\n            if (eventType.match(/^SMUI:\\w+:/)) {\n                const newEventTypeParts = eventType.split(':');\n                let newEventType = '';\n                for (let i = 0; i < newEventTypeParts.length; i++) {\n                    newEventType +=\n                        i === newEventTypeParts.length - 1\n                            ? ':' + newEventTypeParts[i]\n                            : newEventTypeParts[i]\n                                .split('-')\n                                .map((value) => value.slice(0, 1).toUpperCase() + value.slice(1))\n                                .join('');\n                }\n                console.warn(`The event ${eventType.split('$')[0]} has been renamed to ${newEventType.split('$')[0]}.`);\n                eventType = newEventType;\n            }\n            if (modifierMatch) {\n                // Parse the event modifiers.\n                // Supported modifiers:\n                // - preventDefault\n                // - stopPropagation\n                // - passive\n                // - nonpassive\n                // - capture\n                // - once\n                const parts = eventType.split(oldModifierMatch ? ':' : '$');\n                eventType = parts[0];\n                const eventOptions = parts.slice(1).reduce((obj, mod) => {\n                    obj[mod] = true;\n                    return obj;\n                }, {});\n                if (eventOptions.passive) {\n                    options = options || {};\n                    options.passive = true;\n                }\n                if (eventOptions.nonpassive) {\n                    options = options || {};\n                    options.passive = false;\n                }\n                if (eventOptions.capture) {\n                    options = options || {};\n                    options.capture = true;\n                }\n                if (eventOptions.once) {\n                    options = options || {};\n                    options.once = true;\n                }\n                if (eventOptions.preventDefault) {\n                    handler = prevent_default(handler);\n                }\n                if (eventOptions.stopPropagation) {\n                    handler = stop_propagation(handler);\n                }\n            }\n            // Listen for the event directly, with the given options.\n            const off = listen(node, eventType, handler, options);\n            const destructor = () => {\n                off();\n                const idx = destructors.indexOf(destructor);\n                if (idx > -1) {\n                    destructors.splice(idx, 1);\n                }\n            };\n            destructors.push(destructor);\n            // Forward the event from Svelte.\n            if (!(eventType in forwardDestructors)) {\n                forwardDestructors[eventType] = listen(node, eventType, forward);\n            }\n            return destructor;\n        };\n        for (let i = 0; i < events.length; i++) {\n            // Listen to all the events added before mount.\n            $on(events[i][0], events[i][1]);\n        }\n        return {\n            destroy: () => {\n                // Remove all event listeners.\n                for (let i = 0; i < destructors.length; i++) {\n                    destructors[i]();\n                }\n                // Remove all event forwarders.\n                for (let entry of Object.entries(forwardDestructors)) {\n                    entry[1]();\n                }\n            },\n        };\n    };\n}\n//# sourceMappingURL=forwardEventsBuilder.js.map","export function useActions(node, actions) {\n    let actionReturns = [];\n    if (actions) {\n        for (let i = 0; i < actions.length; i++) {\n            const actionEntry = actions[i];\n            const action = Array.isArray(actionEntry) ? actionEntry[0] : actionEntry;\n            if (Array.isArray(actionEntry) && actionEntry.length > 1) {\n                actionReturns.push(action(node, actionEntry[1]));\n            }\n            else {\n                actionReturns.push(action(node));\n            }\n        }\n    }\n    return {\n        update(actions) {\n            if (((actions && actions.length) || 0) != actionReturns.length) {\n                throw new Error('You must not change the length of an actions array.');\n            }\n            if (actions) {\n                for (let i = 0; i < actions.length; i++) {\n                    const returnEntry = actionReturns[i];\n                    if (returnEntry && returnEntry.update) {\n                        const actionEntry = actions[i];\n                        if (Array.isArray(actionEntry) && actionEntry.length > 1) {\n                            returnEntry.update(actionEntry[1]);\n                        }\n                        else {\n                            returnEntry.update();\n                        }\n                    }\n                }\n            }\n        },\n        destroy() {\n            for (let i = 0; i < actionReturns.length; i++) {\n                const returnEntry = actionReturns[i];\n                if (returnEntry && returnEntry.destroy) {\n                    returnEntry.destroy();\n                }\n            }\n        },\n    };\n}\n//# sourceMappingURL=useActions.js.map","{#if selfClosing}\n  <svelte:element\n    this={tag}\n    bind:this={element}\n    use:useActions={use}\n    use:forwardEvents\n    {...$$restProps}\n  />\n{:else}\n  <svelte:element\n    this={tag}\n    bind:this={element}\n    use:useActions={use}\n    use:forwardEvents\n    {...$$restProps}><slot /></svelte:element\n  >\n{/if}\n\n<script>import { get_current_component } from 'svelte/internal';\nimport { forwardEventsBuilder, useActions } from './internal/index.js';\n// Why doesn't this work?\n// Partial<\n//   Omit<svelteHTML.IntrinsicElements[TagName], keyof OwnProps>\n// >\n// Remember to update $$Props if you add/remove/rename props.\nexport let use = [];\nexport let tag;\nconst forwardEvents = forwardEventsBuilder(get_current_component());\n$: selfClosing =\n    [\n        'area',\n        'base',\n        'br',\n        'col',\n        'embed',\n        'hr',\n        'img',\n        'input',\n        'link',\n        'meta',\n        'param',\n        'source',\n        'track',\n        'wbr',\n    ].indexOf(tag) > -1;\nlet element;\nexport function getElement() {\n    return element;\n}\n</script>\n","<svelte:component\n  this={component}\n  {tag}\n  bind:this={element}\n  use={[forwardEvents, ...use]}\n  class={classMap({\n    [className]: true,\n    [smuiClass]: true,\n    ...smuiClassMap,\n  })}\n  {...props}\n  {...$$restProps}><slot /></svelte:component\n>\n\n<script context=\"module\">import { SmuiElement } from '../index.js';\nexport const internals = {\n    component: SmuiElement,\n    tag: 'div',\n    class: '',\n    classMap: {},\n    contexts: {},\n    props: {},\n};\n</script>\n\n<script>import { onDestroy, getContext, setContext } from 'svelte';\nimport { get_current_component } from 'svelte/internal';\nimport { forwardEventsBuilder } from '../internal/forwardEventsBuilder.js';\nimport { classMap } from '../internal/classMap.js';\nexport let use = [];\nlet className = '';\nexport { className as class };\nlet element;\nconst smuiClass = internals.class;\nconst smuiClassMap = {};\nconst smuiClassUnsubscribes = [];\nconst contexts = internals.contexts;\nconst props = internals.props;\nexport let component = internals.component;\nexport let tag = (component === SmuiElement\n    ? internals.tag\n    : undefined);\nObject.entries(internals.classMap).forEach(([name, context]) => {\n    const store = getContext(context);\n    if (store && 'subscribe' in store) {\n        smuiClassUnsubscribes.push(store.subscribe((value) => {\n            smuiClassMap[name] = value;\n        }));\n    }\n});\nconst forwardEvents = forwardEventsBuilder(get_current_component());\nfor (let context in contexts) {\n    if (contexts.hasOwnProperty(context)) {\n        setContext(context, contexts[context]);\n    }\n}\nonDestroy(() => {\n    for (const unsubscribe of smuiClassUnsubscribes) {\n        unsubscribe();\n    }\n});\nexport function getElement() {\n    return element.getElement();\n}\n</script>\n","// @ts-ignore: Internals is exported... argh.\nimport ClassAdder, { internals } from './ClassAdder.svelte';\nconst defaults = Object.assign({}, internals);\nexport function classAdderBuilder(props) {\n    return new Proxy(ClassAdder, {\n        construct: function (target, args) {\n            Object.assign(internals, defaults, props);\n            // @ts-ignore: Need spread arg.\n            return new target(...args);\n        },\n        get: function (target, prop) {\n            Object.assign(internals, defaults, props);\n            return target[prop];\n        },\n    });\n}\n//# sourceMappingURL=classAdderBuilder.js.map"],"names":["classMap","classObj","name","value","oldModifierRegex","newModifierRegex","forwardEventsBuilder","component","$on","events","fullEventType","callback","eventType","destructor","forward","e","bubble","node","destructors","forwardDestructors","handler","options","oldModifierMatch","newModifierMatch","modifierMatch","newEventTypeParts","newEventType","i","parts","eventOptions","obj","mod","prevent_default","stop_propagation","off","listen","idx","entry","useActions","actions","actionReturns","actionEntry","action","returnEntry","ctx","create_dynamic_element_1","create_dynamic_element","insert_hydration","target","svelte_element","anchor","use","$$props","tag","forwardEvents","get_current_component","element","getElement","$$value","selfClosing","internals","SmuiElement","className","smuiClass","smuiClassMap","smuiClassUnsubscribes","contexts","props","context","store","getContext","setContext","onDestroy","unsubscribe","defaults","classAdderBuilder","ClassAdder","args","prop"],"mappings":"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"}